<?xml version="1.0" encoding="UTF-8"?>
<!-- ========================================================== -->
<!--                                                            -->
<!--                    Generate SCIM Source                    -->
<!--                                                            -->
<!-- ========================================================== -->
<project name="build-all" default="build">
       <property name="build.compiler" value="modern"/>
       <property name="build.sysclasspath" value="ignore"/>
       <property name="debug" value="true"/>
              		
	<target name="build" depends="init, scim, cleanup" />
	
	<!-- init target to set up all paths -->
	<target name="init">

		<!-- Set directories and filenames -->	
		<property name="scim.schema" value="scim.xsd" />
		<property name="scim.out.dir" value="../lib" />
		<property name="scim.out.filename" value="scim.jar" />	
		<property name="lib.dir" value="../lib" />
		<property name="src.dir" value="src/" />
		<property name="classes.dir" value="classes/" />
		
		<!-- Add xmlbeans to classpath -->
		<property name="xmlbeansjar" value="${lib.dir}/xbean.jar"/>
		<property name="xmlbeansjsr173" value="${lib.dir}/jsr173_api.jar"/>
		<path id="javac.classpath">
			<pathelement location="${xmlbeansjar}"/>
			<pathelement location="${xmlbeansjsr173}"/>
		</path>
		
		<path id="xbean.path">
			<fileset dir="${lib.dir}" includes="xbean.jar"/>
		</path>
		
		<taskdef name="xmlbean" 
				classname="org.apache.xmlbeans.impl.tool.XMLBean" 
				classpathref="xbean.path"/>
		
		<echo message="SCIM Schema: ${scim.schema}"/>
		<echo message="Output directory: ${scim.out.dir}"/>
		<echo message="Output filename: ${scim.out.filename}"/>
		<echo message="Lib folder: ${lib.dir}"/>
		<echo message="Src folder: ${src.dir}"/>
		<echo message="Classes folder: ${classes.dir}"/>
		
	</target>
	
	

	<!-- Compile schema --> 
	<target name="scim">
		<xmlbean schema="${scim.schema}" 
			destfile="${scim.out.dir}/${scim.out.filename}"
			srcgendir="${src.dir}"
			classgendir="${classes.dir}"
			download="false"
			debug="on"
			javasource="1.6"
			classpathref="javac.classpath"/>
	</target>

	<!-- Cleanup src and classes -->
	<target name="cleanup">
		<delete dir="${src.dir}" />
		<delete dir="${classes.dir}" />
	</target>
</project>
	
